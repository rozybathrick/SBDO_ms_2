---
title: "Rozy's Guide to Base R"
author: "Rozy Bathrick"
date: "2022-11-21"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# R Reference Guide {.tabset .tabset-pills}


## Loading Data and Packages

First couple of things we'll cover: how do you get some data into R, 
and download the right packages to do what you want with it. 

Loading a pre-existing package: use here and library
```{r}
library(here) #this tells R we are working in the current file pathway
library(palmerpenguins) #this loads the practice dataset of Palmer Penguins (it's already been installed)
require(here) #the require function tells R we want to use it - similar to library
require(palmerpenguins)
```

Next we'll make a data frame out of the ginkgo data we collected as a class

```{r}
require(here)
here()
ginkgo<-read.csv(here("data", "ginkgo_data_2022.csv"))
```

## Data Structures

The function c() combines its arguments into a vector (a 1-dimensional data structure consisting of 1 or more elements).

All of the elements must be of the same type.
I can’t combine character and numeric types in the same call to c()
Here’s two examples using numeric and character data types:

```{r}
## Create a vector of numbers:
num_vec  = c(1, 4, 8, 9, 13)
## Create a vector of characters:
char_vec = c("there", "is", "a snake" , "in my boot")
char_vec2=c("to", "infinitey", "and", "beyond")
```

I can show the contents of a vector by typing the name of the vector, or using the print() function.

```{r}
## Typing the name of the vector into the console prints the contents
num_vec
## The print() function accomplishes the same task:
print(char_vec)
```

The function length() identifies how many elements are in a vector
```{r}
length(num_vec)
```

The function matrix() creates a grid of vectors that are the same length in elements.
It can also split a single vector into a grid with the dimensions you specify with nrow or byrow
You can also give the rows and columns names with dimnames
```{r}
m1<-matrix(data=char_vec,  nrow=2)
print(m1)
```

The function data.frame() allows you to build a data frame of rows and columns out of prexisting vectors already in the global environment or create a data frame from scratch. 
```{r}

data.frame(sites=c("King Salmon", "Beluga", "Nome", "Bethel"),
                   birds=c("SBDO", "SBDO", "PAGP", "LEYE"), abundance=c("med", "high", "high", "med"), 
           nests_found=c(9, 13, 12, 8))

```


Here are some simple ways to understand what your data is composed of
```{r}
nrow(ginkgo) #number of rows in the data frame
ncol(ginkgo) #number of columns in the data frame
dim(ginkgo) #number of rows and number of columns in the data frame
```

## Subsetting

Here are some ways to call specific parts of a data frame, without making a new data frame
```{r}
ginkgo$petiole_length #this combines the name of the data frame and the column you want in one call

ginkgo[1,] #the brackets let you specify the number of row or column - if you leave the second space blank it'll call all the elements in the row
ginkgo[2,3] #this calls one specific element at row 2, column 3
ginkgo[,3] #this calls all elements in column 3

subset(penguins, species=="Adelie") #the subset uses a character structure to sort and filter rows or columns
```

## Numerical Data Exploration

Once data has been loaded into a dataframe and subsetted to obtain the section you are interested in analyzing, there are some basic calls to understand a few basics about your data.
```{r}
summary(penguins) ##the summary call provides a look at each column in the dataframe. For continuous vectors, it provides quartile summary. for discrete/categorical, it provides the categories and a tally of each

mean(penguins$bill_length_mm, na.rm=TRUE) ##mean function takes an average of values in a column. to avoid returning an "NA", you must remove rows that are missing data (na.rm = TRUE)

sd(penguins$bill_length_mm, na.rm=TRUE) ##sd function finds the standard deviation of the values in a column from the mean. 
```

## Graphical Data Exploration

### Scatterplot: Using the ginkgo data, create a scatterplot of max leaf depth (x) and max leaf width (y).

```{r}

scat<-plot(max_width~max_depth, data=ginkgo, pch=14, main="Ginkgo leaf dimensions", xlab="Maximum leaf depth (mm)", ylab="Maximum leaf width (mm)", xlim=c(20, 100), ylim=c(40, 120), cex=1.2, col=645)

#structure of scatter plot is y axis ~ x axis
#label the title and axes with main=, xlab=, ylab=
#specify axes scale with xlim and ylim (don't forget you need c())
#cex is the size of the points inside the plot
#col is the color, which you can call as a number, word, or series of letters
```

### Histogram: Create a histogram of penguin flipper lengths.

```{r}

hist<-hist(penguins$flipper_length_mm,main = "Histogram of flipper lengths across three penguin spp.", xlab="flipper length (mm)", breaks=30, col="red")

#specify how many bars you want (how frequently to bin the observations) with argument breaks=

```

### Boxplot1: a simple boxplot of ginkgo petiole lengths

```{r}
box1<-boxplot(ginkgo$petiole_length, main="Petiole Lengths of Ginkgo leaves", ylab="length (mm)", col="yellow")
```

### Boxplot2:conditional boxplot of one of the continuous variables conditioned on the seeds_present column.

```{r}
box2<-boxplot(ginkgo$notch_depth~ginkgo$seeds_present, ylab="length (mm)", main="Notch length of female and male trees", names=c("male", "female"), xlab="  ", col="blue")
```


### Four Histograms

```{r}
shorebirds<-read.csv(here("data", "shorebirds_practice.csv"))
sbdo<-subset(shorebirds, Species=="SBDO")
amgp<-subset(shorebirds, Species=="AMGP")
pagp<-subset(shorebirds, Species=="PAGP")


par(mfrow=c(2,2))
hist(shorebirds$Mass, main="Mass of Three Shorebird Spp", xlab="Mass (g)", breaks=10, col="deeppink")
hist(sbdo$Mass, main="SBDO Mass", xlab="Mass (g)", col="gold2")
hist(amgp$Mass, main="AMGP Mass", xlab="Mass (g)", col="darkblue")
hist(pagp$Mass, main="PAGP Mass", xlab="Mass (g)", col="cornflowerblue")
```


## Distribution Functions

Using dnorm(). Dnorm is used to call the relative likelihood of a specific event for a normal distribution, in which two things are known: the mean and sd. You use it to test the likelihood of an observation, x 
```{r}

dnorm(4, mean=9, sd=2) #in this example, the relative likelihood of observing a 4 is really low, because it would be outside 2 standard deviations

dnorm(8, mean=9, sd=2) #observing an 8 is much more likely

```


Using pnorm(). Pnorm is used to calculate the cumulative density of an observation in a normal distribution, with the mean and sd known. It adds up all the likelihood of seeing the the specific event AND everything to the left of that event in the distribution.

```{r}
pnorm(0.5, mean=1, sd=2) #this is the probability of observing a 0.5, and everything less added together
1-pnorm(0.5, mean=1, sd=2) #this is the probability of an observation greater than 0.5. They must add up to 1

```


Using qnorm(). Qnorm is used to approach likelihood from the opposite direction: given a likelihood between 0 and 1 in a normal distribution, what is the value that bounds this likelihood. Same goes for knowing the mean and sd.

```{r}
qnorm(0.66, mean=3, sd=1) #given we have a 66% probability, values will lie at 3.4 or below
```


Using dbinom(). Dbinom tests the probability of a specific event in a binomial distribution, where there is a categorical response. The two parameters we need to know are the likelihood (p) and sample size (n)

```{r}
dbinom(2, 6, 0.86) # Given the probability of 86%, and 6 trials, how likely are we to get exactly 2? It's pretty low! 
```

Using pbinom(). Similarly, pbinom tests the cumulative probability of a specific event: observing a value OR LESS.

```{r}
pbinom(2, size=5, prob=0.75) #Given the probability of 75% and 5 trials, how likely are we to get 2 or fewer positive events? Pretty low, because the likelihood is high
```

Using qbinom(). Finally,qbinom takes the opposite approach: given a quantile, what is number of events expected?

```{r}
qbinom(.30, size=12, p=.25) #given 12 trials at a probability of 25%, what observation falls in the 30th quantile?
``` 

